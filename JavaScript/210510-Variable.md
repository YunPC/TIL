# 변수

1. 변수란 무엇인가? 왜 필요한가?

컴퓨터는 정보를 메모리에 저장하고, CPU를 통해 연산을 한다. 

메모리는 데이터를 저장할 수 있는 메모리 셀이 집약된 곳이다. 메모리 셀 하나의 크기는 1바이트이며, 컴퓨터는 이 단위를 데이터를 저장하거나 읽는다. 저장하거나 읽을 때 어디에 있는지를 알기 위해 메모리는 고유한 주소를 가진다.

컴퓨터에 저장되는 모든 데이터는 2진수로 이루어져 있다. 

이 데이터들을 재사용하기 위해 메모리 주소를 알아야 하는데, 이를 직접 개발자가 할당하고 접근하는 것은 굉장히 위험하다. 시스템과 관련된 기능을 건드릴 수도 있고, 보안에도 치명적인 영향을 미칠 수 있다.

그래서 메모리 접근 방식을 간접적으로 하기 위해 변수를 사용한다. 변수를 사용하면 개발자 입장에선 이 데이터의 상징적인 명칭을 정의할 수 있어 의미를 명확히 할 수 있다. 그리고 OS에 메모리 통제권을 넘겨주기 때문에 위험한 접근을 방지할 수 있다.

정리하자면 변수는 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름을 말한다.

이 변수에 값을 저장하는 것을 할당이라 하고, 저장한 값을 쓰는 것을 참조라고 한다.

2. 식별자

식별자는 값의 고유한 이름을 이야기한다. 여러 값들은 식별자로 구분할 수 있다.

이 식별자는 메모리 주소와 매핑되어 있다. 값 자체를 저장하는 것이 아니다. 생각해보면 값의 경우 식별자로 정의할 수 없다. 중복될 수 있기 때문이다. 하지만 메모리 주소의 경우 그렇지 않다. 그래서 메모리 주소를 식별자로 가질 수 있지만, 값의 의미를 명확하게 하기위해 사람의 언어로된 식별자를 사용한다.

이 식별자는 비단 변수에만 적용되는 개념은 아니며, 구분할 수 있는 모든 요소에 사용할 수 있다.

3. 변수 선언

변수 선언은 미리 만들어둔 메모리 공간의 주소와 변수 이름을 바인딩하는 것을 말한다. 따라서 변수 선언은 사용을 위해 반드시 필요하다. 자바스크립트는 선언에 `var`, `let`, `const`를 사용한다. 

> ES5 vs ES6
    var의 경우 함수 레벨 스코프이기 때문에 의도치 않은 전역 변수로 오동작을 일으킬 수 있다. 이러한 단점을 보완하기 위해 ES6에 let과 const 키워드를 도입하였다. 그렇다고 var를 사용하지 못하는 것은 아니다. 따라서 ES6는 ES5의 상위 집합이라 볼 수 있다.


>키워드(keyword)
    키워드는 자바스크립트 엔진이 수행할 동작을 규정한 명령어이다.

자바스크립트는 변수를 선언하고 값을 정해주지 않으면 `undefined`라는 암묵적인 값이 들어간다. 따라서 변수 선언은 메모리 공간을 확보하는 선언과 값을 정해주는 초기화 총 두 단계로 이루어져있다.

> 변수 이름 등록
    모든 식별자는 실행 컨텍스트에 등록된다. 실행 컨텍스트(execution context)는 자바스크립트 엔진이 소스코드를 실행하기 위해 필요한 환경을 제공하고 코드의 실행 결과를 관리하는 영역이다. 엔진을 실행 컨텍스트를 통해 변수의 유효 범위를 알 수 있다.
    변수의 이름과 값은 키와 값의 쌍으로 이루어져 있다.

만약 초기화 단계가 없다면 이전에 쓰던 값이 남아있을 수 있는데 이를 쓰레기 값이라 한다. 자바스크립트에서는 키워드 사용시 `undefined`로 초기화를 하기 때문에 쓰레기 값이 나올 거란 걱정을 하지 않아도 된다.

변수를 선언하지 않은 채 참조를 하려고 하면 ReferenceError(참조 에러)가 발생한다.

4. 변수 선언의 실행 시점과 변수 호이스팅

자바스크립트는 변수 선언이 런타임 이전에 실행된다. 이는 자바스크립트엔진이 소스코드를 분석하여 모든 선언(사용자의 초기화는 제외)을 먼저 처리하기 때문이다. 이 과정이 끝나고 나서야 선언문을 제외한 코드를 순차적으로 실행한다. 이것을 호이스팅(variable hoisting)이라 한다.

5. 값의 할당

연산자(=)을 통해 연산자를 기준으로 우변에 있는 값을 죄변에 할당한다.

```javascript
var value;
value = 30;

var v = 30;
```

선언과 할당을 한꺼번에 할 수도 있고, 따로 할 수도 있지만 코드를 실행할 땐 두 단계로 실행한다. 이 때 선언은 런타임 이전에 할당은 런타임에 이루어진다. 

이 때 할당은 선언에서 사용했던 메모리 주소를 사용하는 것이 아니라 새로운 메모리 주소를 할당하여 그곳에 값을 쓴다.

6. 값의 재할당

어떠한 값이 할당된 변수에 새로운 값을 정의하는 것을 재할당이라한다. 만약 재할당이 불가능하면 그 때는 변수가 아니라 상수라고 부른다. 

> const 키워드
    ES6에 도입된 const 키워드를 사용해 선언한 변수는 재할당이 금지된다. 하지만 const가 상수만을 위한 키워드는 아닌다.

재할당도 선언과 마찬가지로 이미 있던 메모리 공간을 지우고 새로운 메모리 공간을 확보해 값을 정의한다.

이렇게 공간을 새롭게 할당해나가면 더 이상 쓰지 않는 메모리 공간들이 생기는데 이 공간들은 가비지 콜렉터가 해제해준다. 하지만 언제 해제될지는 모른다.

> 가비지 콜렉터(grabage collector)
    가비지 콜렉터는 주기적으로 메모리를 감시하며 어떠한 방식으로도 접근이 불가능한 공간을 자동 해제하여 준다. 이를 통해 메모리 누수를 방지할 수 있다. 자바스크립트는 가비지 콜렉터를 포함하는 매니지드 언어이다.

> 언매니지드 언어(unmanaged laguage)와 매니지드 언어(managed language)
    메모리 관리를 직접할 수 있는 경우 언매니지드, 아닌 경우 매니지드 언어라고 불린다. 언매니지드 언어의 대표적인 예로 C언어가 있으며 malloc()이나 free()같은 메모리 제어 함수를 제공한다. 최적의 성능을 낼 수 있지만, 자칫하면 치명적인 오류를 만들 수도 있다.
    이에 반해 언매니지드 언어는 메모리 관리가 자동이기 때문에 생산선을 높일 수 있지만, 성능면에서 어느 정도 손실이 존재한다.

7. 식별자 네이밍 규칙

- 식별자는 특수문제를 제외한 문자, 숫자, 언더스코어, 달러 기호를 포함할 수 있다.
- 위 4가지 부류에서 숫자로 시작할 순 없다.
- 예약어는 식별자로 사용할 수 없다.

> 예약어(reserved word)
    예약어는 프로그래밍 언어에서 이미 사용되는 언어나 예정인 단어들을 이야기한다. 예로는 `await`, `break`등이 있다.
    * 식별자로 사용가능하나 strict 모드에선 불가하다.

ES5부터는 유니코드 문자를 통한 변수 선언이 가능하기 때문에, 한글로도 변수 선언이 가능하지만 바람직하지 않다.

자바스크립트는 대소문자를 구별한다.

네이밍 컨벤션은 여러 단어를 붙여서 변수명을 정할 때 가독성이 좋게 표현할 수 있는 방식들이다.

총 4가지 유형의 네이밍 컨벤션이 존재한다.

- 카멜 케이스 (camelCase)
- 스네이크 케이스(snake_case)
- 파스칼 케이스(PascalCase)
- 헝가리언 케이스 (typeHungarianCase)

가장 일반적인 방식은 변수나 함수 이름에는 카멜케이스를 사용하고, 생성자 함수와 클래스의 이름에는 파스칼 케이스를 사용하는 것이다. 






